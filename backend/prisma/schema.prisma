generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["public", "auth"]
}

// --- Supabase Auth Users (read-only) ---
model AuthUser {
  id    String   @id @db.Uuid
  email String?

  savedRecipes SavedRecipe[]
  recipes      Recipe[]

  @@map("users")    // maps to auth.users
  @@schema("auth")  // make sure Prisma knows it's in auth
}

// --- Your tables in public schema ---

model Recipe {
  id           Int       @id @default(autoincrement())
  title        String
  image        String?
  instructions String?
  createdAt    DateTime  @default(now())
  userId       String?
  user         AuthUser? @relation(fields: [userId], references: [id])

  @@schema("public")
}

model SavedRecipe {
  id           Int      @id @default(autoincrement())
  title        String
  description  String?
  image        String?
  category     String?
  area         String?
  instructions String?
  source       String?
  userid       String
  user         AuthUser @relation(fields: [userid], references: [id])

  @@schema("public")
}
